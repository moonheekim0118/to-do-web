<%- include('../includes/head.ejs') %>
<title><%= pageTitle%></title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
</head>
<body>
    <%- include('../includes/nav.ejs') %>
    <%- include('../includes/header.ejs') %>
    <div class="todo-container">
        <form class="add-todo">
            <input type="text" name="task" class="newTask" placeholder="Add new To do">
            <input type="hidden"  name="_csrf"  value="<%= csrfToken%>"  >
            <input type="button" onClick="addTodo(this)" value="add">
            <div class="radio-box">
                <input type="radio" name="importance" id="strong"> 
                <label for="strong">Very Important!</label>
                <input type="radio" name="importance" id="mid">
                <label for="mid">Kindof..Important!</label>
                <input type="radio" name="importance" id="not">
                <label for="not">Not that Important!</label>
            </div>
        </form>
        <ul class="todo-list <%=todoList.length === 0? 'hidden' : ''%>">
    <% if(todoList.length >0){ %>
        <% todoList.forEach(todo=>{ %>
            <li class="<%= todo.isDone ? 'todo done' : 'todo' %>">
                <input type="checkbox" id="doneToggle" onClick="DoneCheck(this)" <%= todo.isDone ? 'checked': '' %>>
                <input type="hidden" name="postId" id="postId" value="<%=todo._id%>"">
                <span id="contents"><%= todo.contents %></span>
                <div class="dropdown">
                    <button class="dropbtn">
                        <i class="fas fa-ellipsis-v"></i>
                      </button>
                      <div class="dropdown-content">
                        <a href="#" onclick="removeOne(this);return false;">delete</a>
                        <a href="#" onclick="popUpModal(this);return false;" >edit</a>
                      </div>
                </div>
            </li>
        <% }) %>
    <%}%>
</ul>
<button id="clear" class="<%= todoList.length===0 ? 'removed' : '' %>" onClick="clearAll(this)">Clear ALL</button>
</div>
<!--modal-->
<div class="modal-container" id="modal-container">
    <div class="modal">
        <button class="close" id="close">
            <i class="fa fa-times"></i>
        </button>
        <div class="modal-header">
            update your to do 
        </div>
        <div class="modal-content">
            <form action="" class="modal-form">
                <div class="form-control">
                    <input type="text" id="contents">
                </div>
                <div class="form-control">
                    <div class="radio-box">
                        <input type="radio" name="importance" id="strong"> 
                        <label for="strong">Very Important!</label>
                        <input type="radio" name="importance" id="mid">
                        <label for="mid">Kindof..Important!</label>
                        <input type="radio" name="importance" id="not">
                        <label for="not">Not that Important!</label>
                    </div>
                </div>
                <div class="form-control">
                    <input type="button" onclick="updatePost(this)" value="Update" class="update">
                </div>
            </form>                
        </div>
    </div>
</div>
<script src="todayTodo_bundle.js"></script>
</body>
</html>